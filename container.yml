---
version: "2"
defaults:
  image: centos:7
  roles:
    - bootstrap
    - systemd
    - cleanup
  tmpfs:
    - /run
services:
  node:
    from: "{{ image }}"
    labels:
      maintainer: Wilmar den Ouden <info@wilmardenouden.nl>
    environment:
      container: docker
    stop_signal: SIGRTMIN+3
    entrypoint: [/sbin/init]
    cap_add:
      - SYS_ADMIN
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
    tmpfs: "{{ tmpfs }}"
    roles:
      - role: bootstrap
        when: "'bootstrap' in roles"
      - role: systemd
        when: "'systemd' in roles"
      - role: upstart
        when: "'upstart' in roles"
      - role: cleanup
        when: "'cleanup' in roles"
registries: {}
